{"version":3,"file":"game-CtdghJA3.js","sources":["../../js/utils.js","../../js/ship.js","../../js/asteroid.js","../../js/projectile.js","../../js/particles.js","../../js/bonus.js","../../js/et.js","../../js/game.js","../../game.html?html-proxy&index=0.js"],"sourcesContent":["// Utility functions for the Asteroid Game\n\n/**\n * Generate a random number between min and max (inclusive)\n */\nexport function randomRange(min, max) {\n    return Math.random() * (max - min) + min;\n}\n\n/**\n * Generate a random integer between min and max (inclusive)\n */\nexport function randomInt(min, max) {\n    return Math.floor(randomRange(min, max + 1));\n}\n\n/**\n * Calculate distance between two points\n */\nexport function distance(x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);\n}\n\n/**\n * Check if two circles are colliding\n */\nexport function circleCollision(x1, y1, r1, x2, y2, r2) {\n    return distance(x1, y1, x2, y2) < r1 + r2;\n}\n\n/**\n * Clamp a value between min and max\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Convert degrees to radians\n */\nexport function toRadians(degrees) {\n    return degrees * (Math.PI / 180);\n}\n\n/**\n * Convert radians to degrees\n */\nexport function toDegrees(radians) {\n    return radians * (180 / Math.PI);\n}\n\n/**\n * Generate random vertices for an asteroid shape\n */\nexport function generateAsteroidVertices(radius, vertexCount = 10) {\n    const vertices = [];\n    const angleStep = (Math.PI * 2) / vertexCount;\n    \n    for (let i = 0; i < vertexCount; i++) {\n        const angle = i * angleStep;\n        const variance = randomRange(0.7, 1.3);\n        const r = radius * variance;\n        vertices.push({\n            x: Math.cos(angle) * r,\n            y: Math.sin(angle) * r\n        });\n    }\n    \n    return vertices;\n}\n\n/**\n * Lerp (linear interpolation) between two values\n */\nexport function lerp(start, end, t) {\n    return start + (end - start) * t;\n}\n\n/**\n * Generate a random color from a palette\n */\nexport function randomFromArray(array) {\n    return array[Math.floor(Math.random() * array.length)];\n}\n\n","// Ship class for the player's spacecraft\n\nimport { clamp, toRadians } from './utils.js';\n\nexport class Ship {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this.velocityX = 0;\n        this.velocityY = 0;\n        this.angle = -90; // Pointing up initially (in degrees)\n        this.radius = 20;\n        \n        // Movement constants\n        this.rotationSpeed = 250; // degrees per second\n        this.thrustPower = 300;\n        this.friction = 0.98;\n        this.maxSpeed = 400;\n        \n        // Health\n        this.maxHealth = 100;\n        this.health = this.maxHealth;\n        \n        // State\n        this.isThrusting = false;\n        this.invulnerable = false;\n        this.invulnerableTimer = 0;\n        this.invulnerableDuration = 2; // seconds\n        \n        // Visual\n        this.thrustFlicker = 0;\n    }\n    \n    update(deltaTime, keys, canvasWidth, canvasHeight) {\n        // Rotation\n        if (keys['ArrowLeft'] || keys['KeyA']) {\n            this.angle -= this.rotationSpeed * deltaTime;\n        }\n        if (keys['ArrowRight'] || keys['KeyD']) {\n            this.angle += this.rotationSpeed * deltaTime;\n        }\n        \n        // Thrust\n        this.isThrusting = keys['ArrowUp'] || keys['KeyW'];\n        if (this.isThrusting) {\n            const radians = toRadians(this.angle);\n            this.velocityX += Math.cos(radians) * this.thrustPower * deltaTime;\n            this.velocityY += Math.sin(radians) * this.thrustPower * deltaTime;\n        }\n        \n        // Apply friction\n        this.velocityX *= this.friction;\n        this.velocityY *= this.friction;\n        \n        // Clamp speed\n        const speed = Math.sqrt(this.velocityX ** 2 + this.velocityY ** 2);\n        if (speed > this.maxSpeed) {\n            const ratio = this.maxSpeed / speed;\n            this.velocityX *= ratio;\n            this.velocityY *= ratio;\n        }\n        \n        // Update position\n        this.x += this.velocityX * deltaTime;\n        this.y += this.velocityY * deltaTime;\n        \n        // Boundary collision (walled arena)\n        const margin = this.radius;\n        if (this.x < margin) {\n            this.x = margin;\n            this.velocityX *= -0.5;\n        }\n        if (this.x > canvasWidth - margin) {\n            this.x = canvasWidth - margin;\n            this.velocityX *= -0.5;\n        }\n        if (this.y < margin) {\n            this.y = margin;\n            this.velocityY *= -0.5;\n        }\n        if (this.y > canvasHeight - margin) {\n            this.y = canvasHeight - margin;\n            this.velocityY *= -0.5;\n        }\n        \n        // Invulnerability timer\n        if (this.invulnerable) {\n            this.invulnerableTimer -= deltaTime;\n            if (this.invulnerableTimer <= 0) {\n                this.invulnerable = false;\n            }\n        }\n        \n        // Thrust flicker animation\n        this.thrustFlicker += deltaTime * 20;\n    }\n    \n    takeDamage(amount) {\n        if (this.invulnerable) return false;\n        \n        this.health -= amount;\n        this.invulnerable = true;\n        this.invulnerableTimer = this.invulnerableDuration;\n        \n        return true;\n    }\n    \n    reset(x, y) {\n        this.x = x;\n        this.y = y;\n        this.velocityX = 0;\n        this.velocityY = 0;\n        this.angle = -90;\n        this.health = this.maxHealth;\n        this.invulnerable = false;\n        this.invulnerableTimer = 0;\n    }\n    \n    draw(ctx) {\n        ctx.save();\n        ctx.translate(this.x, this.y);\n        ctx.rotate(toRadians(this.angle + 90)); // Adjust so 0 degrees is up\n        \n        // Flicker when invulnerable\n        if (this.invulnerable && Math.floor(this.invulnerableTimer * 10) % 2 === 0) {\n            ctx.globalAlpha = 0.3;\n        }\n        \n        // Draw thrust flame\n        if (this.isThrusting) {\n            const flicker = Math.sin(this.thrustFlicker) * 0.3 + 0.7;\n            const flameLength = 15 + Math.sin(this.thrustFlicker * 2) * 8;\n            \n            ctx.beginPath();\n            ctx.moveTo(-8, 12);\n            ctx.lineTo(0, 12 + flameLength * flicker);\n            ctx.lineTo(8, 12);\n            ctx.closePath();\n            \n            const gradient = ctx.createLinearGradient(0, 12, 0, 12 + flameLength);\n            gradient.addColorStop(0, '#ff6b35');\n            gradient.addColorStop(0.5, '#f7c331');\n            gradient.addColorStop(1, 'rgba(255, 200, 100, 0)');\n            ctx.fillStyle = gradient;\n            ctx.fill();\n        }\n        \n        // Ship body - modern minimalist triangle\n        ctx.beginPath();\n        ctx.moveTo(0, -this.radius);      // Nose\n        ctx.lineTo(-15, this.radius - 5); // Left wing\n        ctx.lineTo(-5, 10);               // Left indent\n        ctx.lineTo(5, 10);                // Right indent\n        ctx.lineTo(15, this.radius - 5);  // Right wing\n        ctx.closePath();\n        \n        // Gradient fill\n        const bodyGradient = ctx.createLinearGradient(0, -this.radius, 0, this.radius);\n        bodyGradient.addColorStop(0, '#4ecdc4');\n        bodyGradient.addColorStop(1, '#2a9d8f');\n        ctx.fillStyle = bodyGradient;\n        ctx.fill();\n        \n        // Outline\n        ctx.strokeStyle = '#1a535c';\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        \n        // Cockpit\n        ctx.beginPath();\n        ctx.arc(0, -5, 5, 0, Math.PI * 2);\n        ctx.fillStyle = '#e9f5f5';\n        ctx.fill();\n        ctx.strokeStyle = '#1a535c';\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        \n        ctx.restore();\n    }\n}\n\n","// Asteroid class with fragmentation system\n\nimport { randomRange, generateAsteroidVertices, randomFromArray } from './utils.js';\n\n// Asteroid size configurations\nexport const ASTEROID_SIZES = {\n    XLARGE: {\n        name: 'xlarge',\n        radius: 100,\n        minSpeed: 30,\n        maxSpeed: 60,\n        hp: 5,\n        points: 200,\n        damage: 35,\n        spawns: 'LARGE',\n        spawnCount: 2\n    },\n    LARGE: {\n        name: 'large',\n        radius: 50,\n        minSpeed: 40,\n        maxSpeed: 80,\n        hp: 3,\n        points: 100,\n        damage: 25,\n        spawns: 'MEDIUM',\n        spawnCount: 2\n    },\n    MEDIUM: {\n        name: 'medium',\n        radius: 30,\n        minSpeed: 60,\n        maxSpeed: 120,\n        hp: 2,\n        points: 50,\n        damage: 15,\n        spawns: 'SMALL',\n        spawnCount: 2\n    },\n    SMALL: {\n        name: 'small',\n        radius: 15,\n        minSpeed: 80,\n        maxSpeed: 150,\n        hp: 1,\n        points: 25,\n        damage: 10,\n        spawns: null,\n        spawnCount: 0\n    }\n};\n\n// Color palette for asteroids (muted earth tones)\nconst ASTEROID_COLORS = [\n    { fill: '#6b705c', stroke: '#3a3f35' },\n    { fill: '#a5a58d', stroke: '#6b6b54' },\n    { fill: '#8b8b73', stroke: '#5a5a4a' },\n    { fill: '#7f7f6a', stroke: '#4f4f42' },\n    { fill: '#9a8c73', stroke: '#6a5c43' }\n];\n\nexport class Asteroid {\n    constructor(x, y, sizeType, inheritedVelocity = null) {\n        this.x = x;\n        this.y = y;\n        this.sizeType = sizeType;\n        this.config = ASTEROID_SIZES[sizeType];\n        this.radius = this.config.radius;\n        this.hp = this.config.hp;\n        \n        // Generate random velocity\n        const speed = randomRange(this.config.minSpeed, this.config.maxSpeed);\n        const angle = randomRange(0, Math.PI * 2);\n        \n        if (inheritedVelocity) {\n            // Inherit some velocity from parent + random offset\n            this.velocityX = inheritedVelocity.x * 0.5 + Math.cos(angle) * speed;\n            this.velocityY = inheritedVelocity.y * 0.5 + Math.sin(angle) * speed;\n        } else {\n            this.velocityX = Math.cos(angle) * speed;\n            this.velocityY = Math.sin(angle) * speed;\n        }\n        \n        // Rotation\n        this.rotation = randomRange(0, Math.PI * 2);\n        this.rotationSpeed = randomRange(-2, 2);\n        \n        // Generate unique shape\n        const vertexCount = Math.floor(randomRange(8, 12));\n        this.vertices = generateAsteroidVertices(this.radius, vertexCount);\n        \n        // Random color from palette\n        this.color = randomFromArray(ASTEROID_COLORS);\n        \n        // State\n        this.destroyed = false;\n    }\n    \n    update(deltaTime, canvasWidth, canvasHeight) {\n        // Update position\n        this.x += this.velocityX * deltaTime;\n        this.y += this.velocityY * deltaTime;\n        \n        // Update rotation\n        this.rotation += this.rotationSpeed * deltaTime;\n        \n        // Bounce off walls\n        if (this.x - this.radius < 0) {\n            this.x = this.radius;\n            this.velocityX *= -1;\n        }\n        if (this.x + this.radius > canvasWidth) {\n            this.x = canvasWidth - this.radius;\n            this.velocityX *= -1;\n        }\n        if (this.y - this.radius < 0) {\n            this.y = this.radius;\n            this.velocityY *= -1;\n        }\n        if (this.y + this.radius > canvasHeight) {\n            this.y = canvasHeight - this.radius;\n            this.velocityY *= -1;\n        }\n    }\n    \n    hit() {\n        this.hp--;\n        if (this.hp <= 0) {\n            this.destroyed = true;\n            return true;\n        }\n        return false;\n    }\n    \n    getFragments() {\n        if (!this.config.spawns) return [];\n        \n        const fragments = [];\n        const spawnType = this.config.spawns;\n        \n        for (let i = 0; i < this.config.spawnCount; i++) {\n            // Offset spawn position slightly\n            const offsetAngle = randomRange(0, Math.PI * 2);\n            const offsetDist = this.radius * 0.3;\n            const newX = this.x + Math.cos(offsetAngle) * offsetDist;\n            const newY = this.y + Math.sin(offsetAngle) * offsetDist;\n            \n            fragments.push(new Asteroid(newX, newY, spawnType, {\n                x: this.velocityX,\n                y: this.velocityY\n            }));\n        }\n        \n        return fragments;\n    }\n    \n    draw(ctx) {\n        ctx.save();\n        ctx.translate(this.x, this.y);\n        ctx.rotate(this.rotation);\n        \n        // Draw shadow\n        ctx.beginPath();\n        ctx.moveTo(this.vertices[0].x + 4, this.vertices[0].y + 4);\n        for (let i = 1; i < this.vertices.length; i++) {\n            ctx.lineTo(this.vertices[i].x + 4, this.vertices[i].y + 4);\n        }\n        ctx.closePath();\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';\n        ctx.fill();\n        \n        // Draw asteroid body\n        ctx.beginPath();\n        ctx.moveTo(this.vertices[0].x, this.vertices[0].y);\n        for (let i = 1; i < this.vertices.length; i++) {\n            ctx.lineTo(this.vertices[i].x, this.vertices[i].y);\n        }\n        ctx.closePath();\n        \n        // Gradient fill for depth\n        const gradient = ctx.createRadialGradient(\n            -this.radius * 0.3, -this.radius * 0.3, 0,\n            0, 0, this.radius\n        );\n        gradient.addColorStop(0, this.color.fill);\n        gradient.addColorStop(1, this.color.stroke);\n        ctx.fillStyle = gradient;\n        ctx.fill();\n        \n        // Outline\n        ctx.strokeStyle = this.color.stroke;\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        \n        // Hit indicator (flash white when damaged)\n        if (this.hp < this.config.hp) {\n            ctx.beginPath();\n            ctx.moveTo(this.vertices[0].x, this.vertices[0].y);\n            for (let i = 1; i < this.vertices.length; i++) {\n                ctx.lineTo(this.vertices[i].x, this.vertices[i].y);\n            }\n            ctx.closePath();\n            ctx.fillStyle = `rgba(255, 255, 255, ${0.1 * (this.config.hp - this.hp)})`;\n            ctx.fill();\n        }\n        \n        ctx.restore();\n    }\n}\n\n/**\n * Create an asteroid at a random edge position\n */\nexport function createRandomAsteroid(canvasWidth, canvasHeight, sizeType) {\n    const side = Math.floor(Math.random() * 4);\n    const config = ASTEROID_SIZES[sizeType];\n    let x, y;\n    \n    switch (side) {\n        case 0: // Top\n            x = randomRange(config.radius, canvasWidth - config.radius);\n            y = config.radius;\n            break;\n        case 1: // Right\n            x = canvasWidth - config.radius;\n            y = randomRange(config.radius, canvasHeight - config.radius);\n            break;\n        case 2: // Bottom\n            x = randomRange(config.radius, canvasWidth - config.radius);\n            y = canvasHeight - config.radius;\n            break;\n        case 3: // Left\n            x = config.radius;\n            y = randomRange(config.radius, canvasHeight - config.radius);\n            break;\n    }\n    \n    return new Asteroid(x, y, sizeType);\n}\n\n","// Projectile class for player bullets\n\nimport { toRadians } from './utils.js';\n\nexport class Projectile {\n    constructor(x, y, angle) {\n        this.x = x;\n        this.y = y;\n        this.speed = 600;\n        this.radius = 4;\n        \n        // Calculate velocity based on ship angle\n        const radians = toRadians(angle);\n        this.velocityX = Math.cos(radians) * this.speed;\n        this.velocityY = Math.sin(radians) * this.speed;\n        \n        // State\n        this.destroyed = false;\n        \n        // Visual trail\n        this.trail = [];\n        this.maxTrailLength = 8;\n    }\n    \n    update(deltaTime, canvasWidth, canvasHeight) {\n        // Store position for trail\n        this.trail.unshift({ x: this.x, y: this.y });\n        if (this.trail.length > this.maxTrailLength) {\n            this.trail.pop();\n        }\n        \n        // Update position\n        this.x += this.velocityX * deltaTime;\n        this.y += this.velocityY * deltaTime;\n        \n        // Destroy on wall hit\n        if (this.x < 0 || this.x > canvasWidth ||\n            this.y < 0 || this.y > canvasHeight) {\n            this.destroyed = true;\n        }\n    }\n    \n    draw(ctx) {\n        // Draw trail\n        for (let i = 0; i < this.trail.length; i++) {\n            const alpha = 1 - (i / this.trail.length);\n            const size = this.radius * (1 - i / this.trail.length * 0.5);\n            \n            ctx.beginPath();\n            ctx.arc(this.trail[i].x, this.trail[i].y, size, 0, Math.PI * 2);\n            ctx.fillStyle = `rgba(255, 170, 50, ${alpha * 0.5})`;\n            ctx.fill();\n        }\n        \n        // Draw glow\n        const gradient = ctx.createRadialGradient(\n            this.x, this.y, 0,\n            this.x, this.y, this.radius * 3\n        );\n        gradient.addColorStop(0, 'rgba(255, 200, 100, 0.8)');\n        gradient.addColorStop(0.5, 'rgba(255, 150, 50, 0.3)');\n        gradient.addColorStop(1, 'rgba(255, 100, 50, 0)');\n        \n        ctx.beginPath();\n        ctx.arc(this.x, this.y, this.radius * 3, 0, Math.PI * 2);\n        ctx.fillStyle = gradient;\n        ctx.fill();\n        \n        // Draw core\n        ctx.beginPath();\n        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n        ctx.fillStyle = '#fff5e6';\n        ctx.fill();\n    }\n}\n\n","// Particle system for explosions and effects\n\nimport { randomRange, randomFromArray } from './utils.js';\n\nclass Particle {\n    constructor(x, y, color, size, speed, angle, lifetime) {\n        this.x = x;\n        this.y = y;\n        this.color = color;\n        this.size = size;\n        this.initialSize = size;\n        this.lifetime = lifetime;\n        this.maxLifetime = lifetime;\n        \n        this.velocityX = Math.cos(angle) * speed;\n        this.velocityY = Math.sin(angle) * speed;\n        this.friction = 0.98;\n        \n        this.destroyed = false;\n    }\n    \n    update(deltaTime) {\n        this.lifetime -= deltaTime;\n        if (this.lifetime <= 0) {\n            this.destroyed = true;\n            return;\n        }\n        \n        this.x += this.velocityX * deltaTime;\n        this.y += this.velocityY * deltaTime;\n        \n        this.velocityX *= this.friction;\n        this.velocityY *= this.friction;\n        \n        // Shrink over time\n        const lifeRatio = this.lifetime / this.maxLifetime;\n        this.size = this.initialSize * lifeRatio;\n    }\n    \n    draw(ctx) {\n        const lifeRatio = this.lifetime / this.maxLifetime;\n        \n        ctx.beginPath();\n        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n        ctx.fillStyle = this.color.replace('1)', `${lifeRatio})`);\n        ctx.fill();\n    }\n}\n\n/**\n * Floating text particle for bonus collection feedback\n */\nclass FloatingText {\n    constructor(x, y, text, color) {\n        this.x = x;\n        this.y = y;\n        this.text = text;\n        this.color = color;\n        this.lifetime = 1.5;\n        this.maxLifetime = 1.5;\n        this.velocityY = -60; // Float upward\n        this.destroyed = false;\n    }\n    \n    update(deltaTime) {\n        this.lifetime -= deltaTime;\n        if (this.lifetime <= 0) {\n            this.destroyed = true;\n            return;\n        }\n        \n        this.y += this.velocityY * deltaTime;\n        // Slow down as it rises\n        this.velocityY *= 0.98;\n    }\n    \n    draw(ctx) {\n        const lifeRatio = this.lifetime / this.maxLifetime;\n        const scale = 0.8 + lifeRatio * 0.4; // Start bigger, shrink slightly\n        \n        ctx.save();\n        ctx.translate(this.x, this.y);\n        ctx.scale(scale, scale);\n        \n        ctx.font = 'bold 20px \"Segoe UI\", sans-serif';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        \n        // Glow effect\n        ctx.shadowColor = this.color;\n        ctx.shadowBlur = 10;\n        \n        // Text with alpha\n        ctx.fillStyle = this.color.replace('1)', `${lifeRatio})`);\n        ctx.fillText(this.text, 0, 0);\n        \n        // White outline for readability\n        ctx.strokeStyle = `rgba(255, 255, 255, ${lifeRatio * 0.8})`;\n        ctx.lineWidth = 1;\n        ctx.strokeText(this.text, 0, 0);\n        \n        ctx.restore();\n    }\n}\n\nexport class ParticleSystem {\n    constructor() {\n        this.particles = [];\n        this.floatingTexts = [];\n    }\n    \n    update(deltaTime) {\n        for (let i = this.particles.length - 1; i >= 0; i--) {\n            this.particles[i].update(deltaTime);\n            if (this.particles[i].destroyed) {\n                this.particles.splice(i, 1);\n            }\n        }\n        \n        for (let i = this.floatingTexts.length - 1; i >= 0; i--) {\n            this.floatingTexts[i].update(deltaTime);\n            if (this.floatingTexts[i].destroyed) {\n                this.floatingTexts.splice(i, 1);\n            }\n        }\n    }\n    \n    draw(ctx) {\n        for (const particle of this.particles) {\n            particle.draw(ctx);\n        }\n        \n        for (const text of this.floatingTexts) {\n            text.draw(ctx);\n        }\n    }\n    \n    /**\n     * Create explosion effect at position\n     */\n    createExplosion(x, y, color, count = 20, speed = 200, size = 5) {\n        const colors = [\n            'rgba(255, 200, 100, 1)',\n            'rgba(255, 150, 50, 1)',\n            'rgba(255, 100, 30, 1)',\n            color\n        ];\n        \n        for (let i = 0; i < count; i++) {\n            const angle = randomRange(0, Math.PI * 2);\n            const particleSpeed = randomRange(speed * 0.3, speed);\n            const particleSize = randomRange(size * 0.5, size * 1.5);\n            const lifetime = randomRange(0.3, 0.8);\n            const particleColor = randomFromArray(colors);\n            \n            this.particles.push(new Particle(\n                x, y, particleColor, particleSize, particleSpeed, angle, lifetime\n            ));\n        }\n    }\n    \n    /**\n     * Create asteroid destruction effect\n     */\n    createAsteroidExplosion(x, y, radius, color) {\n        const count = Math.floor(radius * 1.5);\n        const speed = radius * 3;\n        const size = radius * 0.15;\n        \n        // Rock debris\n        const debrisColors = [\n            'rgba(107, 112, 92, 1)',\n            'rgba(139, 139, 115, 1)',\n            'rgba(165, 165, 141, 1)',\n            color\n        ];\n        \n        for (let i = 0; i < count; i++) {\n            const angle = randomRange(0, Math.PI * 2);\n            const particleSpeed = randomRange(speed * 0.3, speed);\n            const particleSize = randomRange(size * 0.5, size * 2);\n            const lifetime = randomRange(0.5, 1.2);\n            const particleColor = randomFromArray(debrisColors);\n            \n            this.particles.push(new Particle(\n                x, y, particleColor, particleSize, particleSpeed, angle, lifetime\n            ));\n        }\n        \n        // Spark particles\n        for (let i = 0; i < count / 2; i++) {\n            const angle = randomRange(0, Math.PI * 2);\n            const particleSpeed = randomRange(speed * 0.5, speed * 1.5);\n            const particleSize = randomRange(2, 4);\n            const lifetime = randomRange(0.2, 0.5);\n            \n            this.particles.push(new Particle(\n                x, y, 'rgba(255, 220, 150, 1)', particleSize, particleSpeed, angle, lifetime\n            ));\n        }\n    }\n    \n    /**\n     * Create ship damage effect\n     */\n    createDamageEffect(x, y) {\n        const colors = [\n            'rgba(255, 100, 100, 1)',\n            'rgba(255, 150, 100, 1)',\n            'rgba(255, 200, 150, 1)'\n        ];\n        \n        for (let i = 0; i < 15; i++) {\n            const angle = randomRange(0, Math.PI * 2);\n            const speed = randomRange(100, 250);\n            const size = randomRange(3, 8);\n            const lifetime = randomRange(0.3, 0.6);\n            const color = randomFromArray(colors);\n            \n            this.particles.push(new Particle(\n                x, y, color, size, speed, angle, lifetime\n            ));\n        }\n    }\n    \n    /**\n     * Create thrust particles\n     */\n    createThrustParticle(x, y, angle) {\n        const spread = randomRange(-0.3, 0.3);\n        const speed = randomRange(50, 150);\n        const size = randomRange(2, 5);\n        const lifetime = randomRange(0.1, 0.3);\n        const color = randomFromArray([\n            'rgba(255, 150, 50, 1)',\n            'rgba(255, 200, 100, 1)',\n            'rgba(255, 100, 30, 1)'\n        ]);\n        \n        this.particles.push(new Particle(\n            x, y, color, size, speed, angle + Math.PI + spread, lifetime\n        ));\n    }\n    \n    clear() {\n        this.particles = [];\n        this.floatingTexts = [];\n    }\n    \n    /**\n     * Create bonus collection effect with flash, particles, and floating text\n     */\n    createBonusCollectionEffect(x, y, text, color) {\n        // Floating text\n        this.floatingTexts.push(new FloatingText(x, y, text, color));\n        \n        // Particle burst\n        const burstCount = 10;\n        for (let i = 0; i < burstCount; i++) {\n            const angle = randomRange(0, Math.PI * 2);\n            const speed = randomRange(80, 150);\n            const size = randomRange(3, 6);\n            const lifetime = randomRange(0.3, 0.6);\n            \n            this.particles.push(new Particle(\n                x, y, color, size, speed, angle, lifetime\n            ));\n        }\n        \n        // Bright flash particles (white/light colored)\n        for (let i = 0; i < 5; i++) {\n            const angle = randomRange(0, Math.PI * 2);\n            const speed = randomRange(50, 100);\n            const size = randomRange(4, 8);\n            const lifetime = randomRange(0.15, 0.3);\n            \n            this.particles.push(new Particle(\n                x, y, 'rgba(255, 255, 255, 1)', size, speed, angle, lifetime\n            ));\n        }\n    }\n}\n\n","// Bonus package class for power-ups and score bonuses\n\nimport { randomRange, randomInt } from './utils.js';\n\n// Bonus type configurations\nexport const BONUS_TYPES = {\n    SCORE: {\n        id: 'score',\n        color: '#f7c331',      // Gold\n        glowColor: 'rgba(247, 195, 49, 0.5)',\n        symbol: '★',\n        label: 'SCORE'\n    },\n    MULTISHOT: {\n        id: 'multishot',\n        color: '#4ecdc4',      // Cyan\n        glowColor: 'rgba(78, 205, 196, 0.5)',\n        symbol: '✦',\n        label: 'TRIPLE SHOT'\n    }\n};\n\n// Drop chances by asteroid size\nexport const DROP_CHANCES = {\n    XLARGE: 0.40,\n    LARGE: 0.30,\n    MEDIUM: 0.20,\n    SMALL: 0.10\n};\n\nexport class Bonus {\n    constructor(x, y, type) {\n        this.x = x;\n        this.y = y;\n        this.type = type;\n        this.config = BONUS_TYPES[type];\n        \n        // Size and collision\n        this.size = 16;\n        this.radius = 12;\n        \n        // Lifetime\n        this.lifetime = 5; // seconds\n        this.maxLifetime = 5;\n        this.warningThreshold = 2; // Start blinking at 2 seconds remaining\n        \n        // Animation\n        this.bobOffset = 0;\n        this.bobSpeed = 3;\n        this.rotation = 0;\n        this.rotationSpeed = 1.5;\n        \n        // Score value (only for SCORE type)\n        if (type === 'SCORE') {\n            // Random 200-1000, rounded to nearest 50\n            this.scoreValue = Math.round(randomInt(200, 1000) / 50) * 50;\n        }\n        \n        this.destroyed = false;\n    }\n    \n    update(deltaTime) {\n        // Update lifetime\n        this.lifetime -= deltaTime;\n        if (this.lifetime <= 0) {\n            this.destroyed = true;\n            return;\n        }\n        \n        // Update animations\n        this.bobOffset = Math.sin(this.bobSpeed * (this.maxLifetime - this.lifetime) * Math.PI) * 5;\n        this.rotation += this.rotationSpeed * deltaTime;\n    }\n    \n    draw(ctx) {\n        // Check if should be hidden (blinking when about to expire)\n        if (this.lifetime < this.warningThreshold) {\n            const blinkRate = 10; // Blinks per second\n            if (Math.floor(this.lifetime * blinkRate) % 2 === 0) {\n                return; // Skip drawing this frame\n            }\n        }\n        \n        ctx.save();\n        ctx.translate(this.x, this.y + this.bobOffset);\n        \n        // Draw glow\n        ctx.shadowColor = this.config.color;\n        ctx.shadowBlur = 15;\n        \n        // Draw crate body\n        ctx.save();\n        ctx.rotate(this.rotation);\n        \n        // Crate shape (rounded square)\n        const s = this.size;\n        ctx.beginPath();\n        ctx.roundRect(-s/2, -s/2, s, s, 3);\n        \n        // Gradient fill\n        const gradient = ctx.createLinearGradient(-s/2, -s/2, s/2, s/2);\n        gradient.addColorStop(0, this.config.color);\n        gradient.addColorStop(1, this.darkenColor(this.config.color, 0.6));\n        ctx.fillStyle = gradient;\n        ctx.fill();\n        \n        // Border\n        ctx.strokeStyle = this.darkenColor(this.config.color, 0.4);\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        \n        // Crate details - horizontal line\n        ctx.beginPath();\n        ctx.moveTo(-s/2 + 2, 0);\n        ctx.lineTo(s/2 - 2, 0);\n        ctx.strokeStyle = this.darkenColor(this.config.color, 0.5);\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        \n        // Crate details - vertical line\n        ctx.beginPath();\n        ctx.moveTo(0, -s/2 + 2);\n        ctx.lineTo(0, s/2 - 2);\n        ctx.stroke();\n        \n        ctx.restore();\n        \n        // Draw symbol (not rotated)\n        ctx.shadowBlur = 0;\n        ctx.font = 'bold 12px \"Segoe UI\", sans-serif';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillStyle = '#ffffff';\n        ctx.fillText(this.config.symbol, 0, 0);\n        \n        ctx.restore();\n    }\n    \n    darkenColor(hex, factor) {\n        // Convert hex to RGB, darken, convert back\n        const r = parseInt(hex.slice(1, 3), 16);\n        const g = parseInt(hex.slice(3, 5), 16);\n        const b = parseInt(hex.slice(5, 7), 16);\n        \n        const dr = Math.floor(r * factor);\n        const dg = Math.floor(g * factor);\n        const db = Math.floor(b * factor);\n        \n        return `rgb(${dr}, ${dg}, ${db})`;\n    }\n}\n\n/**\n * Check if a bonus should drop from asteroid and return bonus type or null\n */\nexport function shouldDropBonus(asteroidSizeType) {\n    const dropChance = DROP_CHANCES[asteroidSizeType] || 0;\n    \n    if (Math.random() < dropChance) {\n        // 50/50 between score and multishot\n        return Math.random() < 0.5 ? 'SCORE' : 'MULTISHOT';\n    }\n    \n    return null;\n}\n\n","// ET Spaceship class - special enemy that gives multi-shot bonus\n\nimport { randomRange, distance } from './utils.js';\n\nexport class ETSpaceship {\n    constructor(canvasWidth, canvasHeight) {\n        this.canvasWidth = canvasWidth;\n        this.canvasHeight = canvasHeight;\n        \n        // Spawn from random edge\n        this.spawnFromEdge();\n        \n        // Stats\n        this.hp = 2;\n        this.maxHp = 2;\n        this.radius = 25;\n        this.pointsPerHit = 100;\n        this.killBonus = 500;\n        \n        // Movement\n        this.speed = randomRange(80, 120);\n        this.baseAngle = Math.atan2(this.velocityY, this.velocityX);\n        \n        // Zigzag pattern\n        this.zigzagTimer = 0;\n        this.zigzagPeriod = 1.5; // seconds per zigzag cycle\n        this.zigzagAmplitude = 0.8; // radians deviation\n        \n        // Player avoidance\n        this.avoidanceRadius = 150;\n        this.avoidanceStrength = 100;\n        \n        // Visual state\n        this.rotation = 0;\n        this.rotationSpeed = 2;\n        this.pulseTimer = 0;\n        this.hitFlashTimer = 0;\n        this.bobOffset = 0;\n        \n        // State\n        this.destroyed = false;\n    }\n    \n    spawnFromEdge() {\n        const side = Math.floor(Math.random() * 4);\n        const margin = this.radius || 25;\n        \n        switch (side) {\n            case 0: // Top\n                this.x = randomRange(margin, this.canvasWidth - margin);\n                this.y = -margin;\n                this.velocityX = randomRange(-50, 50);\n                this.velocityY = randomRange(60, 100);\n                break;\n            case 1: // Right\n                this.x = this.canvasWidth + margin;\n                this.y = randomRange(margin, this.canvasHeight - margin);\n                this.velocityX = randomRange(-100, -60);\n                this.velocityY = randomRange(-50, 50);\n                break;\n            case 2: // Bottom\n                this.x = randomRange(margin, this.canvasWidth - margin);\n                this.y = this.canvasHeight + margin;\n                this.velocityX = randomRange(-50, 50);\n                this.velocityY = randomRange(-100, -60);\n                break;\n            case 3: // Left\n                this.x = -margin;\n                this.y = randomRange(margin, this.canvasHeight - margin);\n                this.velocityX = randomRange(60, 100);\n                this.velocityY = randomRange(-50, 50);\n                break;\n        }\n    }\n    \n    update(deltaTime, playerX, playerY) {\n        // Update timers\n        this.zigzagTimer += deltaTime;\n        this.pulseTimer += deltaTime;\n        this.bobOffset = Math.sin(this.pulseTimer * 3) * 3;\n        this.rotation += this.rotationSpeed * deltaTime;\n        \n        if (this.hitFlashTimer > 0) {\n            this.hitFlashTimer -= deltaTime;\n        }\n        \n        // Calculate zigzag offset\n        const zigzagOffset = Math.sin(this.zigzagTimer * Math.PI * 2 / this.zigzagPeriod) * this.zigzagAmplitude;\n        \n        // Base movement direction with zigzag\n        const moveAngle = this.baseAngle + zigzagOffset;\n        let moveX = Math.cos(moveAngle) * this.speed;\n        let moveY = Math.sin(moveAngle) * this.speed;\n        \n        // Player avoidance\n        const distToPlayer = distance(this.x, this.y, playerX, playerY);\n        if (distToPlayer < this.avoidanceRadius && distToPlayer > 0) {\n            const avoidFactor = 1 - (distToPlayer / this.avoidanceRadius);\n            const avoidAngle = Math.atan2(this.y - playerY, this.x - playerX);\n            moveX += Math.cos(avoidAngle) * this.avoidanceStrength * avoidFactor;\n            moveY += Math.sin(avoidAngle) * this.avoidanceStrength * avoidFactor;\n        }\n        \n        // Apply movement\n        this.x += moveX * deltaTime;\n        this.y += moveY * deltaTime;\n        \n        // Bounce off screen edges (stay in play area)\n        const margin = this.radius + 10;\n        if (this.x < margin) {\n            this.x = margin;\n            this.velocityX *= -1;\n            this.baseAngle = Math.PI - this.baseAngle;\n        }\n        if (this.x > this.canvasWidth - margin) {\n            this.x = this.canvasWidth - margin;\n            this.velocityX *= -1;\n            this.baseAngle = Math.PI - this.baseAngle;\n        }\n        if (this.y < margin) {\n            this.y = margin;\n            this.velocityY *= -1;\n            this.baseAngle = -this.baseAngle;\n        }\n        if (this.y > this.canvasHeight - margin) {\n            this.y = this.canvasHeight - margin;\n            this.velocityY *= -1;\n            this.baseAngle = -this.baseAngle;\n        }\n    }\n    \n    hit() {\n        this.hp--;\n        this.hitFlashTimer = 0.15;\n        \n        if (this.hp <= 0) {\n            this.destroyed = true;\n            return true; // Destroyed\n        }\n        return false; // Still alive\n    }\n    \n    draw(ctx) {\n        ctx.save();\n        ctx.translate(this.x, this.y + this.bobOffset);\n        \n        // Hit flash effect\n        if (this.hitFlashTimer > 0) {\n            ctx.globalAlpha = 0.5 + Math.sin(this.hitFlashTimer * 40) * 0.5;\n        }\n        \n        // Glow effect\n        const glowIntensity = 0.5 + Math.sin(this.pulseTimer * 4) * 0.3;\n        ctx.shadowColor = '#ff00ff';\n        ctx.shadowBlur = 20 * glowIntensity;\n        \n        // Draw UFO body (saucer shape)\n        ctx.save();\n        ctx.rotate(this.rotation * 0.1); // Subtle wobble\n        \n        // Bottom hull (ellipse)\n        ctx.beginPath();\n        ctx.ellipse(0, 5, 25, 10, 0, 0, Math.PI * 2);\n        const hullGradient = ctx.createLinearGradient(-25, 0, 25, 10);\n        hullGradient.addColorStop(0, '#ff66ff');\n        hullGradient.addColorStop(0.5, '#cc00cc');\n        hullGradient.addColorStop(1, '#990099');\n        ctx.fillStyle = hullGradient;\n        ctx.fill();\n        ctx.strokeStyle = '#ff00ff';\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        \n        // Dome (top half ellipse)\n        ctx.beginPath();\n        ctx.ellipse(0, 0, 15, 12, 0, Math.PI, 0);\n        const domeGradient = ctx.createRadialGradient(-5, -5, 0, 0, 0, 15);\n        domeGradient.addColorStop(0, 'rgba(200, 255, 255, 0.9)');\n        domeGradient.addColorStop(0.5, 'rgba(100, 200, 255, 0.7)');\n        domeGradient.addColorStop(1, 'rgba(50, 100, 200, 0.5)');\n        ctx.fillStyle = domeGradient;\n        ctx.fill();\n        ctx.strokeStyle = '#88ffff';\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        \n        // ET inside dome\n        ctx.fillStyle = '#44ff44'; // Green ET\n        // ET head\n        ctx.beginPath();\n        ctx.ellipse(0, -3, 6, 7, 0, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // ET eyes (big black eyes)\n        ctx.fillStyle = '#000000';\n        ctx.beginPath();\n        ctx.ellipse(-3, -4, 2, 3, -0.3, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.beginPath();\n        ctx.ellipse(3, -4, 2, 3, 0.3, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // Eye shine\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(-2, -5, 0.8, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.beginPath();\n        ctx.arc(4, -5, 0.8, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // Lights on bottom of saucer\n        const lightCount = 6;\n        for (let i = 0; i < lightCount; i++) {\n            const angle = (i / lightCount) * Math.PI * 2 + this.pulseTimer * 2;\n            const lx = Math.cos(angle) * 18;\n            const ly = 8 + Math.sin(angle) * 3;\n            \n            ctx.beginPath();\n            ctx.arc(lx, ly, 3, 0, Math.PI * 2);\n            const lightOn = Math.sin(this.pulseTimer * 8 + i) > 0;\n            ctx.fillStyle = lightOn ? '#ffff00' : '#666600';\n            ctx.fill();\n        }\n        \n        ctx.restore();\n        \n        // Damage indicator (crack/damage marks when hit once)\n        if (this.hp < this.maxHp) {\n            ctx.strokeStyle = 'rgba(255, 100, 100, 0.8)';\n            ctx.lineWidth = 2;\n            ctx.beginPath();\n            ctx.moveTo(-10, -5);\n            ctx.lineTo(-5, 0);\n            ctx.lineTo(-12, 5);\n            ctx.stroke();\n            ctx.beginPath();\n            ctx.moveTo(8, -3);\n            ctx.lineTo(12, 2);\n            ctx.stroke();\n        }\n        \n        ctx.restore();\n    }\n}\n","// Main game controller\n\nimport { Ship } from './ship.js';\nimport { Asteroid, ASTEROID_SIZES, createRandomAsteroid } from './asteroid.js';\nimport { Projectile } from './projectile.js';\nimport { ParticleSystem } from './particles.js';\nimport { Bonus, BONUS_TYPES, shouldDropBonus } from './bonus.js';\nimport { ETSpaceship } from './et.js';\nimport { circleCollision, toRadians } from './utils.js';\n\nexport class Game {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n        \n        // Set canvas size\n        this.resize();\n        window.addEventListener('resize', () => this.resize());\n        \n        // Game objects\n        this.ship = null;\n        this.asteroids = [];\n        this.projectiles = [];\n        this.bonuses = [];\n        this.particles = new ParticleSystem();\n        \n        // Multi-shot power-up timer\n        this.multiShotTimer = 0;\n        \n        // ET spaceship\n        this.et = null;\n        this.etSpawnTimer = 10; // First spawn after 10 seconds\n        this.etSpawnInterval = 10; // Spawn every 10 seconds\n        this.etWarningMessage = null;\n        this.etWarningTimer = 0;\n        \n        // Input handling\n        this.keys = {};\n        this.setupInput();\n        \n        // Game state\n        this.score = 0;\n        this.wave = 0;\n        this.gameState = 'title'; // 'title', 'playing', 'waveComplete', 'gameOver'\n        this.waveTimer = 0;\n        this.wavePauseDuration = 2;\n        \n        // Shooting\n        this.fireRate = 8; // shots per second\n        this.fireCooldown = 0;\n        \n        // Screen shake\n        this.shakeAmount = 0;\n        this.shakeDuration = 0;\n        \n        // Timing\n        this.lastTime = 0;\n        \n        // Start game loop\n        this.gameLoop = this.gameLoop.bind(this);\n        requestAnimationFrame(this.gameLoop);\n    }\n    \n    resize() {\n        this.canvas.width = window.innerWidth;\n        this.canvas.height = window.innerHeight;\n    }\n    \n    setupInput() {\n        window.addEventListener('keydown', (e) => {\n            this.keys[e.code] = true;\n            \n            // Start game on space from title\n            if (e.code === 'Space' && this.gameState === 'title') {\n                this.startGame();\n            }\n            \n            // Restart on space from game over\n            if (e.code === 'Space' && this.gameState === 'gameOver') {\n                this.startGame();\n            }\n            \n            // Prevent scrolling\n            if (['Space', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.code)) {\n                e.preventDefault();\n            }\n        });\n        \n        window.addEventListener('keyup', (e) => {\n            this.keys[e.code] = false;\n        });\n    }\n    \n    startGame() {\n        this.score = 0;\n        this.wave = 0;\n        this.ship = new Ship(this.canvas.width / 2, this.canvas.height / 2);\n        this.asteroids = [];\n        this.projectiles = [];\n        this.bonuses = [];\n        this.particles.clear();\n        this.multiShotTimer = 0;\n        this.et = null;\n        this.etSpawnTimer = 10;\n        this.etWarningMessage = null;\n        this.etWarningTimer = 0;\n        this.gameState = 'playing';\n        this.startNextWave();\n    }\n    \n    startNextWave() {\n        this.wave++;\n        this.asteroids = [];\n        \n        // Calculate asteroid count and types for this wave\n        const baseCount = 2 + this.wave;\n        \n        // Spawn asteroids at edges\n        for (let i = 0; i < baseCount; i++) {\n            let sizeType = 'LARGE';\n            \n            // X-Large asteroids appear from wave 3+\n            if (this.wave >= 3 && Math.random() < 0.3) {\n                sizeType = 'XLARGE';\n            }\n            \n            this.asteroids.push(createRandomAsteroid(\n                this.canvas.width,\n                this.canvas.height,\n                sizeType\n            ));\n        }\n        \n        this.gameState = 'playing';\n    }\n    \n    shoot() {\n        if (this.fireCooldown > 0) return;\n        \n        // Spawn projectile at ship's nose\n        const radians = toRadians(this.ship.angle);\n        const noseX = this.ship.x + Math.cos(radians) * this.ship.radius;\n        const noseY = this.ship.y + Math.sin(radians) * this.ship.radius;\n        \n        if (this.multiShotTimer > 0) {\n            // Triple shot: forward + 30° left + 30° right\n            this.projectiles.push(new Projectile(noseX, noseY, this.ship.angle));\n            this.projectiles.push(new Projectile(noseX, noseY, this.ship.angle - 30));\n            this.projectiles.push(new Projectile(noseX, noseY, this.ship.angle + 30));\n        } else {\n            // Normal single shot\n            this.projectiles.push(new Projectile(noseX, noseY, this.ship.angle));\n        }\n        \n        this.fireCooldown = 1 / this.fireRate;\n    }\n    \n    addScreenShake(amount, duration) {\n        this.shakeAmount = Math.max(this.shakeAmount, amount);\n        this.shakeDuration = Math.max(this.shakeDuration, duration);\n    }\n    \n    spawnET() {\n        this.et = new ETSpaceship(this.canvas.width, this.canvas.height);\n        this.etWarningMessage = 'ET INCOMING!';\n        this.etWarningTimer = 2; // Show for 2 seconds\n    }\n    \n    update(deltaTime) {\n        if (this.gameState === 'title' || this.gameState === 'gameOver') {\n            this.particles.update(deltaTime);\n            return;\n        }\n        \n        if (this.gameState === 'waveComplete') {\n            this.waveTimer -= deltaTime;\n            if (this.waveTimer <= 0) {\n                this.startNextWave();\n            }\n            this.particles.update(deltaTime);\n            return;\n        }\n        \n        // Update ship\n        this.ship.update(deltaTime, this.keys, this.canvas.width, this.canvas.height);\n        \n        // Create thrust particles\n        if (this.ship.isThrusting && Math.random() < 0.5) {\n            const radians = toRadians(this.ship.angle);\n            const thrustX = this.ship.x - Math.cos(radians) * 15;\n            const thrustY = this.ship.y - Math.sin(radians) * 15;\n            this.particles.createThrustParticle(thrustX, thrustY, radians);\n        }\n        \n        // Shooting (hold space for rapid fire)\n        if (this.keys['Space']) {\n            this.shoot();\n        }\n        this.fireCooldown = Math.max(0, this.fireCooldown - deltaTime);\n        \n        // Update projectiles\n        for (let i = this.projectiles.length - 1; i >= 0; i--) {\n            this.projectiles[i].update(deltaTime, this.canvas.width, this.canvas.height);\n            if (this.projectiles[i].destroyed) {\n                this.projectiles.splice(i, 1);\n            }\n        }\n        \n        // Update asteroids\n        for (const asteroid of this.asteroids) {\n            asteroid.update(deltaTime, this.canvas.width, this.canvas.height);\n        }\n        \n        // Update bonuses\n        for (let i = this.bonuses.length - 1; i >= 0; i--) {\n            this.bonuses[i].update(deltaTime);\n            if (this.bonuses[i].destroyed) {\n                this.bonuses.splice(i, 1);\n            }\n        }\n        \n        // Update multi-shot timer\n        if (this.multiShotTimer > 0) {\n            this.multiShotTimer -= deltaTime;\n        }\n        \n        // Update ET warning message\n        if (this.etWarningTimer > 0) {\n            this.etWarningTimer -= deltaTime;\n            if (this.etWarningTimer <= 0) {\n                this.etWarningMessage = null;\n            }\n        }\n        \n        // Update ET spawn timer\n        if (!this.et && this.etSpawnTimer > 0) {\n            this.etSpawnTimer -= deltaTime;\n            if (this.etSpawnTimer <= 0) {\n                this.spawnET();\n            }\n        }\n        \n        // Update ET\n        if (this.et) {\n            this.et.update(deltaTime, this.ship.x, this.ship.y);\n            if (this.et.destroyed) {\n                this.et = null;\n                this.etSpawnTimer = this.etSpawnInterval;\n            }\n        }\n        \n        // Update particles\n        this.particles.update(deltaTime);\n        \n        // Update screen shake\n        if (this.shakeDuration > 0) {\n            this.shakeDuration -= deltaTime;\n            if (this.shakeDuration <= 0) {\n                this.shakeAmount = 0;\n            }\n        }\n        \n        // Check collisions\n        this.checkCollisions();\n        \n        // Check for wave complete\n        if (this.asteroids.length === 0 && this.gameState === 'playing') {\n            this.gameState = 'waveComplete';\n            this.waveTimer = this.wavePauseDuration;\n            // Wave bonus\n            this.score += this.wave * 50;\n            // Clear ET on wave complete (it escapes)\n            this.et = null;\n            this.etSpawnTimer = this.etSpawnInterval;\n        }\n        \n        // Check for game over\n        if (this.ship.health <= 0) {\n            this.gameState = 'gameOver';\n            this.particles.createExplosion(\n                this.ship.x, this.ship.y,\n                'rgba(78, 205, 196, 1)',\n                50, 300, 8\n            );\n            this.addScreenShake(15, 0.5);\n        }\n    }\n    \n    checkCollisions() {\n        // Projectile vs Asteroid\n        for (let p = this.projectiles.length - 1; p >= 0; p--) {\n            const projectile = this.projectiles[p];\n            \n            for (let a = this.asteroids.length - 1; a >= 0; a--) {\n                const asteroid = this.asteroids[a];\n                \n                if (circleCollision(\n                    projectile.x, projectile.y, projectile.radius,\n                    asteroid.x, asteroid.y, asteroid.radius\n                )) {\n                    // Hit asteroid\n                    projectile.destroyed = true;\n                    \n                    // Small hit effect\n                    this.particles.createExplosion(\n                        projectile.x, projectile.y,\n                        asteroid.color.fill,\n                        5, 100, 3\n                    );\n                    \n                    if (asteroid.hit()) {\n                        // Asteroid destroyed\n                        this.score += asteroid.config.points;\n                        \n                        // Create explosion\n                        this.particles.createAsteroidExplosion(\n                            asteroid.x, asteroid.y,\n                            asteroid.radius,\n                            `rgba(${parseInt(asteroid.color.fill.slice(1, 3), 16)}, ${parseInt(asteroid.color.fill.slice(3, 5), 16)}, ${parseInt(asteroid.color.fill.slice(5, 7), 16)}, 1)`\n                        );\n                        \n                        // Screen shake based on size\n                        this.addScreenShake(asteroid.radius * 0.1, 0.2);\n                        \n                        // Check for bonus drop\n                        const bonusType = shouldDropBonus(asteroid.sizeType);\n                        if (bonusType) {\n                            this.bonuses.push(new Bonus(asteroid.x, asteroid.y, bonusType));\n                        }\n                        \n                        // Spawn fragments\n                        const fragments = asteroid.getFragments();\n                        this.asteroids.push(...fragments);\n                        \n                        // Remove destroyed asteroid\n                        this.asteroids.splice(a, 1);\n                    }\n                    \n                    break;\n                }\n            }\n        }\n        \n        // Clean up destroyed projectiles\n        this.projectiles = this.projectiles.filter(p => !p.destroyed);\n        \n        // Ship vs Asteroid - use full radii for accurate collision\n        if (!this.ship.invulnerable) {\n            for (const asteroid of this.asteroids) {\n                if (circleCollision(\n                    this.ship.x, this.ship.y, this.ship.radius,\n                    asteroid.x, asteroid.y, asteroid.radius\n                )) {\n                    if (this.ship.takeDamage(asteroid.config.damage)) {\n                        this.particles.createDamageEffect(this.ship.x, this.ship.y);\n                        this.addScreenShake(10, 0.3);\n                    }\n                    break;\n                }\n            }\n        }\n        \n        // Ship vs Bonus - collection\n        for (let i = this.bonuses.length - 1; i >= 0; i--) {\n            const bonus = this.bonuses[i];\n            if (circleCollision(\n                this.ship.x, this.ship.y, this.ship.radius,\n                bonus.x, bonus.y, bonus.radius\n            )) {\n                // Apply bonus effect\n                this.collectBonus(bonus);\n                \n                // Remove collected bonus\n                this.bonuses.splice(i, 1);\n            }\n        }\n        \n        // Projectile vs ET\n        if (this.et) {\n            for (let p = this.projectiles.length - 1; p >= 0; p--) {\n                const projectile = this.projectiles[p];\n                \n                if (circleCollision(\n                    projectile.x, projectile.y, projectile.radius,\n                    this.et.x, this.et.y, this.et.radius\n                )) {\n                    projectile.destroyed = true;\n                    \n                    // Award points for hit\n                    this.score += this.et.pointsPerHit;\n                    \n                    // Hit effect\n                    this.particles.createExplosion(\n                        projectile.x, projectile.y,\n                        '#ff00ff',\n                        8, 150, 4\n                    );\n                    \n                    if (this.et.hit()) {\n                        // ET destroyed - give bonus!\n                        this.score += this.et.killBonus;\n                        \n                        // Award multi-shot bonus (+10 seconds)\n                        const wasActive = this.multiShotTimer > 0;\n                        this.multiShotTimer += 10;\n                        \n                        // Big explosion\n                        this.particles.createExplosion(\n                            this.et.x, this.et.y,\n                            '#ff00ff',\n                            30, 300, 8\n                        );\n                        \n                        // Bonus text\n                        const text = wasActive ? 'TRIPLE SHOT +10s!' : 'TRIPLE SHOT!';\n                        this.particles.createBonusCollectionEffect(\n                            this.et.x, this.et.y,\n                            text,\n                            'rgba(255, 0, 255, 1)'\n                        );\n                        \n                        // Screen shake\n                        this.addScreenShake(12, 0.4);\n                        \n                        // ET is destroyed, will be cleaned up in update\n                        this.et = null;\n                        this.etSpawnTimer = this.etSpawnInterval;\n                    }\n                    \n                    break;\n                }\n            }\n        }\n        \n        // ET vs Small Asteroids (ET destroys them)\n        if (this.et) {\n            for (let a = this.asteroids.length - 1; a >= 0; a--) {\n                const asteroid = this.asteroids[a];\n                \n                // Only destroy SMALL asteroids\n                if (asteroid.sizeType !== 'SMALL') continue;\n                \n                if (circleCollision(\n                    this.et.x, this.et.y, this.et.radius,\n                    asteroid.x, asteroid.y, asteroid.radius\n                )) {\n                    // Destroy the asteroid\n                    this.particles.createExplosion(\n                        asteroid.x, asteroid.y,\n                        asteroid.color.fill,\n                        10, 100, 3\n                    );\n                    \n                    this.asteroids.splice(a, 1);\n                }\n            }\n        }\n    }\n    \n    collectBonus(bonus) {\n        const config = bonus.config;\n        \n        if (bonus.type === 'SCORE') {\n            // Add score\n            this.score += bonus.scoreValue;\n            \n            // Create collection effect with score text\n            this.particles.createBonusCollectionEffect(\n                bonus.x, bonus.y,\n                `+${bonus.scoreValue}`,\n                `rgba(247, 195, 49, 1)` // Gold\n            );\n        } else if (bonus.type === 'MULTISHOT') {\n            // Add to multi-shot timer (stacking)\n            const wasActive = this.multiShotTimer > 0;\n            this.multiShotTimer += 5; // Add 5 seconds\n            \n            // Create collection effect\n            const text = wasActive ? '+5s' : 'TRIPLE SHOT!';\n            this.particles.createBonusCollectionEffect(\n                bonus.x, bonus.y,\n                text,\n                `rgba(78, 205, 196, 1)` // Cyan\n            );\n        }\n        \n        // Small screen shake for feedback\n        this.addScreenShake(3, 0.1);\n    }\n    \n    draw() {\n        const ctx = this.ctx;\n        \n        // Apply screen shake\n        ctx.save();\n        if (this.shakeAmount > 0) {\n            const shakeX = (Math.random() - 0.5) * this.shakeAmount * 2;\n            const shakeY = (Math.random() - 0.5) * this.shakeAmount * 2;\n            ctx.translate(shakeX, shakeY);\n        }\n        \n        // Clear and draw background\n        this.drawBackground();\n        \n        // Draw game objects\n        if (this.gameState !== 'title') {\n            // Draw particles (behind everything)\n            this.particles.draw(ctx);\n            \n            // Draw projectiles\n            for (const projectile of this.projectiles) {\n                projectile.draw(ctx);\n            }\n            \n            // Draw asteroids\n            for (const asteroid of this.asteroids) {\n                asteroid.draw(ctx);\n            }\n            \n            // Draw bonuses\n            for (const bonus of this.bonuses) {\n                bonus.draw(ctx);\n            }\n            \n            // Draw ET\n            if (this.et) {\n                this.et.draw(ctx);\n            }\n            \n            // Draw ship\n            if (this.gameState !== 'gameOver') {\n                this.ship.draw(ctx);\n            }\n        }\n        \n        ctx.restore();\n        \n        // Draw UI (not affected by shake)\n        this.drawUI();\n    }\n    \n    drawBackground() {\n        const ctx = this.ctx;\n        \n        // Deep space gradient\n        const gradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        gradient.addColorStop(0, '#0a0a1a');\n        gradient.addColorStop(0.5, '#0f1629');\n        gradient.addColorStop(1, '#0a0a1a');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        \n        // Stars (static, based on canvas size)\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\n        const starSeed = 12345;\n        const starCount = Math.floor(this.canvas.width * this.canvas.height / 5000);\n        for (let i = 0; i < starCount; i++) {\n            const x = ((starSeed * (i + 1) * 9301 + 49297) % 233280) / 233280 * this.canvas.width;\n            const y = ((starSeed * (i + 1) * 7927 + 15485) % 174720) / 174720 * this.canvas.height;\n            const size = ((starSeed * (i + 1) * 3571 + 8837) % 10000) / 10000 * 2 + 0.5;\n            ctx.beginPath();\n            ctx.arc(x, y, size, 0, Math.PI * 2);\n            ctx.fill();\n        }\n        \n        // Arena border\n        ctx.strokeStyle = 'rgba(78, 205, 196, 0.3)';\n        ctx.lineWidth = 2;\n        ctx.strokeRect(10, 10, this.canvas.width - 20, this.canvas.height - 20);\n    }\n    \n    drawUI() {\n        const ctx = this.ctx;\n        \n        if (this.gameState === 'title') {\n            this.drawTitleScreen();\n            return;\n        }\n        \n        if (this.gameState === 'gameOver') {\n            this.drawGameOverScreen();\n        }\n        \n        if (this.gameState === 'waveComplete') {\n            this.drawWaveCompleteMessage();\n        }\n        \n        // HUD\n        const padding = 30;\n        \n        // Health bar\n        const healthBarWidth = 200;\n        const healthBarHeight = 20;\n        const healthPercent = this.ship.health / this.ship.maxHealth;\n        \n        ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n        ctx.fillRect(padding - 2, padding - 2, healthBarWidth + 4, healthBarHeight + 4);\n        \n        ctx.fillStyle = '#1a1a2e';\n        ctx.fillRect(padding, padding, healthBarWidth, healthBarHeight);\n        \n        // Health color gradient based on amount\n        let healthColor;\n        if (healthPercent > 0.6) {\n            healthColor = '#4ecdc4';\n        } else if (healthPercent > 0.3) {\n            healthColor = '#f7c331';\n        } else {\n            healthColor = '#ff6b6b';\n        }\n        \n        ctx.fillStyle = healthColor;\n        ctx.fillRect(padding, padding, healthBarWidth * healthPercent, healthBarHeight);\n        \n        ctx.strokeStyle = '#4ecdc4';\n        ctx.lineWidth = 2;\n        ctx.strokeRect(padding, padding, healthBarWidth, healthBarHeight);\n        \n        // Health text\n        ctx.fillStyle = '#ffffff';\n        ctx.font = 'bold 14px \"Segoe UI\", sans-serif';\n        ctx.textAlign = 'center';\n        ctx.fillText(`${Math.ceil(this.ship.health)} HP`, padding + healthBarWidth / 2, padding + 15);\n        \n        // Score\n        ctx.textAlign = 'right';\n        ctx.font = 'bold 28px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = '#4ecdc4';\n        ctx.fillText(`${this.score}`, this.canvas.width - padding, padding + 25);\n        \n        ctx.font = '14px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';\n        ctx.fillText('SCORE', this.canvas.width - padding, padding + 45);\n        \n        // Wave\n        ctx.textAlign = 'center';\n        ctx.font = 'bold 20px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = '#f7c331';\n        ctx.fillText(`WAVE ${this.wave}`, this.canvas.width / 2, padding + 20);\n        \n        // Multi-shot timer (if active)\n        if (this.multiShotTimer > 0) {\n            const barWidth = 120;\n            const barHeight = 8;\n            const barX = padding;\n            const barY = padding + healthBarHeight + 15;\n            \n            // Label\n            ctx.textAlign = 'left';\n            ctx.font = 'bold 12px \"Segoe UI\", sans-serif';\n            ctx.fillStyle = '#4ecdc4';\n            ctx.fillText('TRIPLE SHOT', barX, barY - 3);\n            \n            // Background\n            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n            ctx.fillRect(barX - 1, barY + 2, barWidth + 2, barHeight + 2);\n            \n            ctx.fillStyle = '#1a1a2e';\n            ctx.fillRect(barX, barY + 3, barWidth, barHeight);\n            \n            // Timer bar (max 10 seconds displayed)\n            const timerPercent = Math.min(this.multiShotTimer / 10, 1);\n            ctx.fillStyle = '#4ecdc4';\n            ctx.fillRect(barX, barY + 3, barWidth * timerPercent, barHeight);\n            \n            // Border\n            ctx.strokeStyle = '#4ecdc4';\n            ctx.lineWidth = 1;\n            ctx.strokeRect(barX, barY + 3, barWidth, barHeight);\n            \n            // Time remaining text\n            ctx.textAlign = 'right';\n            ctx.font = '10px \"Segoe UI\", sans-serif';\n            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n            ctx.fillText(`${this.multiShotTimer.toFixed(1)}s`, barX + barWidth, barY - 3);\n        }\n        \n        // ET Warning Message\n        if (this.etWarningMessage && this.etWarningTimer > 0) {\n            const centerX = this.canvas.width / 2;\n            const warningY = 100;\n            \n            // Pulsing effect\n            const pulse = Math.sin(this.etWarningTimer * 10) * 0.3 + 0.7;\n            \n            ctx.textAlign = 'center';\n            ctx.font = 'bold 36px \"Segoe UI\", sans-serif';\n            ctx.shadowColor = '#ff00ff';\n            ctx.shadowBlur = 20 * pulse;\n            ctx.fillStyle = `rgba(255, 0, 255, ${pulse})`;\n            ctx.fillText(this.etWarningMessage, centerX, warningY);\n            ctx.shadowBlur = 0;\n        }\n    }\n    \n    drawTitleScreen() {\n        const ctx = this.ctx;\n        const centerX = this.canvas.width / 2;\n        const centerY = this.canvas.height / 2;\n        \n        // Title\n        ctx.textAlign = 'center';\n        ctx.font = 'bold 72px \"Segoe UI\", sans-serif';\n        \n        // Glow effect\n        ctx.shadowColor = '#4ecdc4';\n        ctx.shadowBlur = 30;\n        ctx.fillStyle = '#4ecdc4';\n        ctx.fillText('ASTEROIDS', centerX, centerY - 50);\n        ctx.shadowBlur = 0;\n        \n        // Subtitle\n        ctx.font = '24px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n        ctx.fillText('Modern Edition', centerX, centerY);\n        \n        // Instructions\n        ctx.font = '18px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\n        ctx.fillText('Press SPACE to start', centerX, centerY + 80);\n        \n        // Controls\n        ctx.font = '14px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\n        ctx.fillText('A/D or ←/→ to rotate  •  W or ↑ to thrust  •  SPACE to shoot', centerX, centerY + 150);\n    }\n    \n    drawGameOverScreen() {\n        const ctx = this.ctx;\n        const centerX = this.canvas.width / 2;\n        const centerY = this.canvas.height / 2;\n        \n        // Overlay\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        \n        // Game Over text\n        ctx.textAlign = 'center';\n        ctx.font = 'bold 64px \"Segoe UI\", sans-serif';\n        ctx.shadowColor = '#ff6b6b';\n        ctx.shadowBlur = 20;\n        ctx.fillStyle = '#ff6b6b';\n        ctx.fillText('GAME OVER', centerX, centerY - 40);\n        ctx.shadowBlur = 0;\n        \n        // Final score\n        ctx.font = 'bold 32px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = '#4ecdc4';\n        ctx.fillText(`Final Score: ${this.score}`, centerX, centerY + 20);\n        \n        ctx.font = '24px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = '#f7c331';\n        ctx.fillText(`Wave Reached: ${this.wave}`, centerX, centerY + 60);\n        \n        // Restart prompt\n        ctx.font = '18px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\n        ctx.fillText('Press SPACE to play again', centerX, centerY + 120);\n    }\n    \n    drawWaveCompleteMessage() {\n        const ctx = this.ctx;\n        const centerX = this.canvas.width / 2;\n        const centerY = this.canvas.height / 2;\n        \n        ctx.textAlign = 'center';\n        ctx.font = 'bold 48px \"Segoe UI\", sans-serif';\n        ctx.shadowColor = '#f7c331';\n        ctx.shadowBlur = 20;\n        ctx.fillStyle = '#f7c331';\n        ctx.fillText(`WAVE ${this.wave} COMPLETE!`, centerX, centerY);\n        ctx.shadowBlur = 0;\n        \n        ctx.font = '24px \"Segoe UI\", sans-serif';\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n        ctx.fillText(`Wave Bonus: +${this.wave * 50}`, centerX, centerY + 40);\n    }\n    \n    gameLoop(timestamp) {\n        // Calculate delta time\n        const deltaTime = Math.min((timestamp - this.lastTime) / 1000, 0.1);\n        this.lastTime = timestamp;\n        \n        // Update and draw\n        this.update(deltaTime);\n        this.draw();\n        \n        // Continue loop\n        requestAnimationFrame(this.gameLoop);\n    }\n}\n\n","\n        import { Game } from './js/game.js';\n        \n        // Wait for DOM to load\n        window.addEventListener('DOMContentLoaded', () => {\n            const canvas = document.getElementById('gameCanvas');\n            const loading = document.getElementById('loading');\n            \n            // Initialize game\n            const game = new Game(canvas);\n            \n            // Hide loading screen\n            setTimeout(() => {\n                loading.classList.add('hidden');\n            }, 500);\n        });\n    "],"names":["randomRange","min","max","randomInt","distance","x1","y1","x2","y2","circleCollision","r1","r2","toRadians","degrees","generateAsteroidVertices","radius","vertexCount","vertices","angleStep","i","angle","variance","randomFromArray","array","Ship","x","y","deltaTime","keys","canvasWidth","canvasHeight","radians","speed","ratio","margin","amount","ctx","flicker","flameLength","gradient","bodyGradient","ASTEROID_SIZES","ASTEROID_COLORS","Asteroid","sizeType","inheritedVelocity","fragments","spawnType","offsetAngle","offsetDist","newX","newY","createRandomAsteroid","side","config","Projectile","alpha","size","Particle","color","lifetime","lifeRatio","FloatingText","text","scale","ParticleSystem","particle","count","colors","particleSpeed","particleSize","particleColor","debrisColors","spread","burstCount","BONUS_TYPES","DROP_CHANCES","Bonus","type","s","hex","factor","r","g","b","dr","dg","db","shouldDropBonus","asteroidSizeType","dropChance","ETSpaceship","playerX","playerY","zigzagOffset","moveAngle","moveX","moveY","distToPlayer","avoidFactor","avoidAngle","glowIntensity","hullGradient","domeGradient","lightCount","lx","ly","lightOn","Game","canvas","e","baseCount","noseX","noseY","duration","thrustX","thrustY","asteroid","p","projectile","a","bonusType","bonus","wasActive","shakeX","shakeY","starSeed","starCount","padding","healthBarWidth","healthBarHeight","healthPercent","healthColor","barX","barY","timerPercent","centerX","warningY","pulse","centerY","timestamp","loading"],"mappings":"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"}